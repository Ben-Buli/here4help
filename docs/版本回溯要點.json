[
  {
    "功能描述": "重新設計 **My Works** 分頁的任務卡片版面：將金額（reward_point）資訊移至卡片下方，與地點、日期、語言四項資訊組成 **2x2** 的欄位佈局，內容水平靠左排列，超出範圍時以省略號顯示（完整內容仍可於點擊 Info 後的彈窗中查看）。任務標題、狀態標籤與該 2x2 資訊區塊統一包含在同一容器中，避免佈局錯位 [oai_citation:0‡file-k2ttubjai1zewtowmmd91z](file://file-K2TTUBjai1ZEwToWmMd91z#:~:text=)。此外，優化任務卡片的狀態與附加資訊：若任務狀態為 **pending confirm**（待確認），則圓形百分比指示器中的文字改用原有的倒數計時樣式；若狀態為 **dispute**（爭議），則於圓形指示器內顯示報告圖示。任務狀態標籤右側新增顯示對應主題配色的發布者名稱文字，下方四項任務資訊文字的顏色風格則比照獎勵點數文字，套用系統主題配色 [oai_citation:1‡file-lddbvaudkqnjhvdepncykl](file://file-LddbVaUdkQnjhVDEPNcYKL#:~:text=My%20Works%E5%88%86%E9%A0%81%E7%9A%84%E4%BB%BB%E5%8B%99%E5%8D%A1%E7%89%87%EF%BC%8C%E6%87%89%E8%A9%B2%E8%AE%93%E9%87%91%E9%8C%A2%20reward_point%E7%9A%84%E4%BB%BB%E5%8B%99%E8%B3%87%E8%A8%8A%E5%88%B0%E4%B8%8B%E9%9D%A2%EF%BC%8C%E8%B7%9F%E5%9C%B0%E9%BB%9E%E3%80%81%E6%97%A5%E6%9C%9F%E3%80%81%E8%AA%9E%E8%A8%80%E5%9B%9B%E5%80%8B%E8%AE%8A%E6%88%90%20%E5%85%A9%E5%85%A9%E4%B8%80%E7%B5%84%E8%AB%8B%E5%8F%83%E8%80%83%E6%88%91%E7%AC%AC%E4%BA%8C%E5%BC%B5%E6%88%AA%E5%9C%96%E7%9A%84%E9%9C%80%E6%B1%82%E8%AA%AA%E6%98%8E%EF%BC%8C%E4%BB%A5%E5%8F%8A%E6%88%AA%E5%9C%96%E4%B8%AD%E7%B4%85%E8%89%B2%E5%8C%A1%E7%B7%9A%EF%BC%88%E5%8C%A1%E7%B7%9A%E6%98%AF%E5%8F%83%E8%80%83%E4%B8%8D%E8%A6%81%E5%81%9A%E5%87%BA%E4%BE%86%EF%BC%89%20%E6%98%AF%E5%9B%9B%E5%80%8B%E4%BB%BB%E5%8B%99%E8%B3%87%E9%81%8B%E6%AC%84%E4%BD%8D,%E7%AC%A6%E8%99%9F%E4%BD%86%E4%B8%8D%E5%BD%B1%E9%9F%BF%20info%E9%BB%9E%E6%93%8A%E4%B9%8B%E5%BE%8C%E7%9A%84%E5%BD%88%E5%87%BA%E8%A6%96%E7%AA%97%E9%A1%AF%E7%A4%BA%E7%9A%84%E5%85%A7%E5%AE%B9%EF%BC%8C%E5%9B%9B%E5%80%8B%E4%BB%BB%E5%8B%99%E8%B3%87%E8%A8%8A%E6%AC%84%E4%BD%8D%E7%B5%84%E5%90%88%E7%9A%84%E5%8F%B3%E5%81%B4%E5%8C%85%E7%95%99%E4%B8%80%E9%BB%9E%E7%A9%BA%E9%96%93%EF%BC%8C%E4%B8%8D%E8%A6%81%E5%A1%AB%E6%BB%BF)。",
    "涉及檔案與對應邏輯": "前端 `home_page.dart`（ChatListPage）中 My Works 分頁的任務卡片 UI 佈局與狀態顯示邏輯。",
    "來源": "cursor_execute_task_for_action_bar.md L7-L15"
  },
  {
    "功能描述": "升級 **Posted Tasks** 分頁的任務卡片版面與功能，使其與 My Works 分頁風格一致並加入新元素。佈局上，同樣採用 2x2 的任務資訊欄位顯示日期、地點、獎勵點數、語言。**Action Bar** 部分移除了文字 “Actions”，改以 `>` 圖標指示可展開操作列 [oai_citation:2‡file-lddbvaudkqnjhvdepncykl](file://file-LddbVaUdkQnjhVDEPNcYKL#:~:text=Posted%20Tasks%E7%9A%84%20%E4%BB%BB%E5%8B%99%E5%8D%A1%E7%89%87%E4%B9%9F%E5%81%9A%E8%B7%9FMY%20Works%E9%80%99%E6%AC%A1%E4%B8%80%E6%A8%A3%E7%9A%84%E6%8E%92%E7%89%88%E4%BF%AE%E6%94%B9%20%E4%B8%A6%E4%B8%94,hour%20ago%2C%201%20month%20ago%E7%AD%89%E7%AD%89)；將 **Edit**、**Delete** 等按鈕的圖示調整為隨主題色變化。優化任務的應徵者列表 UI 為扁平清單項目，每個應徵者條目顯示圓形頭像（優先使用實際頭像，若無則以姓名首字生成的文字頭像），並將頭像背景與文字改為主題色系 [oai_citation:3‡file-lddbvaudkqnjhvdepncykl](file://file-LddbVaUdkQnjhVDEPNcYKL#:~:text=1,list%20item%EF%BC%8C%E4%B8%A6%E4%B8%94%20circle%20avatar%20%E5%85%88%E5%B9%AB%E6%88%91%E9%A0%90%E8%A8%AD%E5%8F%96%E5%BE%97%E8%A9%B2user%E7%9A%84%E5%AF%A6%E9%9A%9B%E9%A0%AD%E5%83%8F%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%92%E6%9C%89%E5%86%8D%E6%94%B9%E7%94%A8%E6%96%87%E5%AD%97%E5%9C%93%E5%BD%A2%E9%A0%AD%E5%83%8F%EF%BC%8C%E4%BD%86%E6%98%AF%E8%83%8C%E6%99%AF%E5%92%8C%E6%96%87%E5%AD%97%E9%A1%8F%E8%89%B2%E5%B9%AB%E6%88%91%E6%9B%BF%E6%8F%9B%E6%88%90%E4%B8%BB%E9%A1%8C%E9%85%8D%E8%89%B2)。Action Bar 新增 **Favorite** 收藏按鈕（愛心圖標，以主題色呈現）供使用者收藏任務 [oai_citation:4‡file-lddbvaudkqnjhvdepncykl](file://file-LddbVaUdkQnjhVDEPNcYKL#:~:text=3,%E5%9B%9B%E5%80%8B%E4%BB%BB%E5%8B%99%E8%B3%87%E8%A8%8A%E7%9A%84%E4%B8%8B%E6%96%B9%E5%86%8D%E6%96%B0%E5%A2%9E%E4%B8%80%E5%80%8B%20%E6%99%82%E9%96%93%E8%B7%9D%E9%9B%A2%E6%88%B3%E8%A8%98)。在任務資訊區下方增加一條 **時間距離戳記**，以任務發布時間與現在的差距顯示如 “X days ago”，超過一定時長則顯示具體日期 [oai_citation:5‡file-lddbvaudkqnjhvdepncykl](file://file-LddbVaUdkQnjhVDEPNcYKL#:~:text=4,ago%2C%201%20month%20ago%E7%AD%89%E7%AD%89%20%E4%B8%A6%E4%B8%94%E8%B6%85%E9%81%8E%E4%B8%80%E5%AE%9A%E6%97%A5%E6%9C%9F%E7%9A%84%E8%B7%9D%E9%9B%A2%E5%B0%B1%E9%A1%AF%E7%A4%BA%E6%9C%88%E6%97%A5%E6%88%96%E5%B9%B4%E6%9C%88%E6%97%A5%EF%BC%8C%E4%BD%A0%E5%B9%AB%E6%88%91%E6%8E%A1%E7%94%A8%E9%80%9A%E5%B8%B8%E6%9C%83%E4%BD%BF%E7%94%A8%E7%9A%84%E6%96%B9%E5%BC%8F%E8%A8%AD%E8%A8%88)。同時，在任務標題右側新增 **Emoji 狀態列**：若任務發布未滿一週則顯示🌱圖標（表示新任務），若該任務有超過一位應徵者則顯示🔥圖標（熱門），若當前使用者已收藏該任務則顯示❤️圖標 [oai_citation:6‡file-lddbvaudkqnjhvdepncykl](file://file-LddbVaUdkQnjhVDEPNcYKL#:~:text=%E4%B8%A6%E4%B8%94%E8%B6%85%E9%81%8E%E4%B8%80%E5%AE%9A%E6%97%A5%E6%9C%9F%E7%9A%84%E8%B7%9D%E9%9B%A2%E5%B0%B1%E9%A1%AF%E7%A4%BA%E6%9C%88%E6%97%A5%E6%88%96%E5%B9%B4%E6%9C%88%E6%97%A5%EF%BC%8C%E4%BD%A0%E5%B9%AB%E6%88%91%E6%8E%A1%E7%94%A8%E9%80%9A%E5%B8%B8%E6%9C%83%E4%BD%BF%E7%94%A8%E7%9A%84%E6%96%B9%E5%BC%8F%E8%A8%AD%E8%A8%88%206,%E5%A6%82%E6%9E%9C%E8%A9%B2%E4%BB%BB%E5%8B%99%E7%99%BC%E5%B8%83%E6%99%82%E9%96%93%E5%B0%8F%E6%96%BC%E4%B8%80%E6%98%9F%E6%9C%9F%EF%BC%8C%E5%B9%AB%E6%88%91%E6%96%B0%E5%A2%9E%E4%B8%80%E5%80%8B%20%E4%BB%A3%E8%A1%A8new%E7%9A%84icon%EF%BC%8C%E8%8B%A5%E6%98%AF%E7%95%B6%E5%89%8D%E4%BD%BF%E7%94%A8%E8%80%85%E5%AD%97%E5%B9%BE%E6%94%B6%E8%97%8F%E7%9A%84%E5%89%87%E6%94%BE%E4%B8%80%E5%80%8B%E6%84%9B%E5%BF%83%E5%9C%96%E6%A8%99%E3%80%81%E5%A6%82%E6%9E%9C%E8%A9%B2%E4%BB%BB%E5%8B%99%E5%B0%8D%E6%87%89%E7%9A%84%E6%87%89%E5%BE%B5%E8%80%85%E5%A4%A7%E6%96%BC%E4%B8%80%E4%BD%8D%EF%BC%8C%E5%89%87%E9%A1%AF%E7%A4%BA%E7%81%AB%E7%9A%84icon)。",
    "涉及檔案與對應邏輯": "前端 `home_page.dart`（ChatListPage）中 Posted Tasks 分頁的任務卡片 UI 佈局和 Action Bar 操作按鈕邏輯；其中包含 Emoji 狀態列與時間戳的 UI 呈現、應徵者列表樣式，以及收藏按鈕功能（前端點擊處理與主題色樣式）。",
    "來源": "cursor_execute_task_for_action_bar.md L23749-L23760"
  },
  {
    "功能描述": "從 **Chat** 頁面的任務卡片操作列（Action Bar）中移除 **Favorite**（收藏）按鈕及其相關功能，只保留 Info、Edit、Delete 三個操作按鈕 [oai_citation:7‡file-lddbvaudkqnjhvdepncykl](file://file-LddbVaUdkQnjhVDEPNcYKL#:~:text=)。這項修改將收藏功能從界面上刪除，包括 UI 按鈕和對應的點擊處理邏輯，使用者無法再透過任務卡片直接收藏任務。",
    "涉及檔案與對應邏輯": "前端 `home_page.dart`（ChatListPage）的任務 Action Bar UI 與狀態管理（移除收藏按鈕和 `_toggleFavorite` 等函式調用）；同時影響 `task_favorites_service.dart` 等收藏相關模組（收藏功能的邏輯不再被使用）。",
    "來源": "cursor_execute_task_for_action_bar.md L104171-L104174"
  },
  {
    "功能描述": "調整 **My Works** 頁面的任務篩選切換邏輯：將 “Show My Tasks” 與 “Show Applied Tasks” 兩個篩選選項從互斥關係改為獨立的複選框。預設狀態下，`Show Applied Tasks` 為 **true**（開啟），而 `Show My Tasks` 為 **false** [oai_citation:8‡file-5pfujd5kyiq9w5babvqgwv](file://file-5pFujd5kyiq9w5BAbVqgwV#:~:text=%E5%B9%AB%E6%88%91%E8%AA%BF%E6%95%B4%20show%20applied%20tasks%20%E9%A0%90%E8%A8%AD%E7%82%BA,my%20tasks%20%E8%B7%9F%20applied%20tasks%E9%80%99%E5%85%A9%E5%80%8B%E6%98%AF%E4%BA%92%E7%82%BA%E7%9B%B8%E5%8F%8D%E7%9A%84%E5%80%BC%EF%BC%8C%E5%9B%A0%E7%82%BA%E5%B7%B2%E7%B6%93%E6%87%89%E5%BE%B5%E7%9A%84%E4%BB%BB%E5%8B%99%E4%B8%8D%E5%8F%AF%E8%83%BD%E5%90%8C%E6%99%82%E6%98%AF%E6%88%91%E7%9A%84%E4%BB%BB%E5%8B%99)。現在兩個選項可以同時存在開啟或關閉的任意組合：若兩者均不勾選，則列表顯示**全部任務**（不按任務類型過濾）；互斥的邏輯已移除，兩個開關不再相互影響 [oai_citation:9‡file-5pfujd5kyiq9w5babvqgwv](file://file-5pFujd5kyiq9w5BAbVqgwV#:~:text=)。UI 上已將這兩項設定改為複選框顯示，並適度縮小了選項間的間距以優化版面。",
    "涉及檔案與對應邏輯": "前端 `task_list_page.dart` 的任務列表篩選狀態與邏輯（新增複選框控制的兩個布林值 `showMyTasksOnly` 和 `showAppliedOnly`，調整篩選判定條件）；涉及篩選 UI 元件的佈局間距樣式調整。",
    "來源": "cursor_my_works.md L7-L10, L10745-L10748"
  },
  {
    "功能描述": "優化任務列表的排序選單顯示文字，使排序依據和順序更直觀易懂。比如：在排序選項中明確標示 `📅 Date (Z-A / A-Z)` 代表日期由新到舊或舊到新 [oai_citation:10‡file-5pfujd5kyiq9w5babvqgwv](file://file-5pFujd5kyiq9w5BAbVqgwV#:~:text=,%E6%B8%85%E6%A5%9A%E8%A1%A8%E6%98%8E%E6%98%AF%E7%8D%8E%E5%8B%B5%E9%BB%9E%E6%95%B8%E6%8E%92%E5%BA%8F)；`💰 Reward Points (High-Low / Low-High)` 代表獎勵點數由高到低或低到高。同時，在使用者切換排序方向時，動態顯示對應的箭頭符號與說明文字，例如 “⬇️ Newest First (Z-A)” 表示最新在前、“⬆️ Oldest First (A-Z)” 表示最舊在前 [oai_citation:11‡file-5pfujd5kyiq9w5babvqgwv](file://file-5pFujd5kyiq9w5BAbVqgwV#:~:text=,%E9%AB%98%E5%88%B0%E4%BD%8E)。透過在標籤中加入 **Z-A/A-Z** 提示和箭頭圖示，消除歧義，提升排序功能的易用性和專業性。",
    "涉及檔案與對應邏輯": "前端 `task_list_page.dart` 的排序選項 UI（RadioListTile 列表）與文字資源更新；包含日期和獎勵點數兩種排序的標題文字，以及根據 `sortDesc` 狀態選擇顯示“Newest/Oldest First”或“High/Low to ...”等字樣。",
    "來源": "cursor_my_works.md L7-L10"
  },
  {
    "功能描述": "修正聊天詳情頁的 **應徵履歷查看** 與聊天室初始化邏輯。現在，點擊 `/chat/detail` 頁面中的 “View Resume” 按鈕時，會從資料庫讀取該任務應徵者當初提交的回答內容，並顯示在彈出的履歷對話框中（包括 cover_letter 內容及問卷回答等） [oai_citation:12‡file-5pfujd5kyiq9w5babvqgwv](file://file-5pFujd5kyiq9w5BAbVqgwV#:~:text=%2Fchat%2Fdetail%20%E7%9A%84%20view%20Reseume%E9%BB%9E%E6%93%8A%E5%BE%8C%E5%87%BA%E7%8F%BE%E7%9A%84%E5%85%A7%E5%AE%B9%20%E6%94%B9%E6%88%90,%E5%9C%A8%E7%95%B6%E5%89%8D%E4%BD%BF%E7%94%A8%E8%80%85%E6%87%89%E5%BE%B5%E4%BB%BB%E5%8B%99%E9%80%81%E5%87%BA%E5%8E%BB%E8%A1%A8%E5%96%AE%E4%B9%8B%E5%BE%8C%EF%BC%8C%E7%9B%AE%E5%89%8D%E7%9A%84%E5%81%9A%E6%B3%95%E6%98%AF%E5%BB%BA%E7%AB%8B%E6%96%B0%E7%9A%84%E8%81%8A%E5%A4%A9%E5%AE%A4%E4%B8%A6%E8%87%AA%E5%8B%95%E5%82%B3%E9%81%9E%E6%87%89%E5%BE%B5%E8%A8%8A%E6%81%AF%E5%88%B0%E8%81%8A%E5%A4%A9%E5%AE%A4%20%E7%9B%AE%E5%89%8D%E7%9A%84%E5%95%8F%E9%A1%8C%E6%98%AF%20applier%E7%9A%84%E5%90%8D%E7%A8%B1%E3%80%81%E9%A0%AD%E5%83%8F%E6%B2%92%E6%9C%89%E6%AD%A3%E7%A2%BA%E8%AE%80%E5%8F%96%E4%BD%9C%E7%82%BA%E6%87%89%E5%BE%B5%E8%80%85%E7%9A%84%E7%95%B6%E5%89%8D%E4%BD%BF%E7%94%A8%E8%80%85%E7%9A%84%E8%B3%87%E6%96%99%20%E5%8F%A6%E5%A4%96%E8%87%AA%E5%8B%95%E9%80%81%E5%87%BA%E7%9A%84%E6%87%89%E5%BE%B5%E8%A8%8A%E6%81%AF%EF%BC%8C%E6%98%AF%E7%95%B6%E5%89%8D%E4%BD%BF%E7%94%A8%E8%80%85%EF%BC%88%E6%88%91%E6%96%B9%EF%BC%89%E5%82%B3%E9%81%9E%E7%9A%84%E8%A8%8A%E6%81%AF%EF%BC%8C%E6%8C%89%E7%85%A7%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%9A%84%E4%B8%80%E5%B0%8D%E4%B8%80%E8%81%8A%E5%A4%A9%E4%BB%8B%E9%9D%A2%E8%A8%AD%E8%A8%88%EF%BC%8C%E9%80%9A%E5%B8%B8%E6%87%89%E8%A9%B2%E6%98%AF%E5%8F%B3%E5%81%B4%E7%82%BA%E6%88%91%E6%96%B9%E7%9A%84%E8%A8%8A%E6%81%AF%20%E5%B9%AB%E6%88%91%E8%AA%BF%E6%95%B4%E6%8E%92%E7%89%88)；原本顯示的 “Introduction” 欄位已移除，直接呈現應徵者提交的自我推薦信（cover letter）。同時，調整任務應徵送出後的新聊天室建立流程：現在當前用戶提交應徵表單後，系統將建立對應的聊天房間並自動發出一則應徵訊息。該訊息在聊天室中正確顯示為**由應徵者（當前用戶）發出**（出現在對話右側），並帶有正確的應徵者名稱與頭像 [oai_citation:13‡file-5pfujd5kyiq9w5babvqgwv](file://file-5pFujd5kyiq9w5BAbVqgwV#:~:text=%E4%BB%BB%E5%8B%99%E6%87%89%E5%BE%B5%E9%A0%81%E9%9D%A2%E9%80%81%E5%87%BA%E5%BE%8C%E5%B0%87%E8%A8%8A%E6%81%AF%E9%80%81%E5%88%B0%E6%96%B0%E5%BB%BA%E7%AB%8B%E7%9A%84%E4%BB%BB%E5%8B%99%E8%81%8A%E5%A4%A9%E5%AE%A4%E5%8A%9F%E8%83%BD%E9%9C%80%E8%A6%81%E8%AA%BF%E6%95%B4%20%E5%9C%A8%E7%95%B6%E5%89%8D%E4%BD%BF%E7%94%A8%E8%80%85%E6%87%89%E5%BE%B5%E4%BB%BB%E5%8B%99%E9%80%81%E5%87%BA%E5%8E%BB%E8%A1%A8%E5%96%AE%E4%B9%8B%E5%BE%8C%EF%BC%8C%E7%9B%AE%E5%89%8D%E7%9A%84%E5%81%9A%E6%B3%95%E6%98%AF%E5%BB%BA%E7%AB%8B%E6%96%B0%E7%9A%84%E8%81%8A%E5%A4%A9%E5%AE%A4%E4%B8%A6%E8%87%AA%E5%8B%95%E5%82%B3%E9%81%9E%E6%87%89%E5%BE%B5%E8%A8%8A%E6%81%AF%E5%88%B0%E8%81%8A%E5%A4%A9%E5%AE%A4%20%E7%9B%AE%E5%89%8D%E7%9A%84%E5%95%8F%E9%A1%8C%E6%98%AF%20applier%E7%9A%84%E5%90%8D%E7%A8%B1%E3%80%81%E9%A0%AD%E5%83%8F%E6%B2%92%E6%9C%89%E6%AD%A3%E7%A2%BA%E8%AE%80%E5%8F%96%E4%BD%9C%E7%82%BA%E6%87%89%E5%BE%B5%E8%80%85%E7%9A%84%E7%95%B6%E5%89%8D%E4%BD%BF%E7%94%A8%E8%80%85%E7%9A%84%E8%B3%87%E6%96%99%20%E5%8F%A6%E5%A4%96%E8%87%AA%E5%8B%95%E9%80%81%E5%87%BA%E7%9A%84%E6%87%89%E5%BE%B5%E8%A8%8A%E6%81%AF%EF%BC%8C%E6%98%AF%E7%95%B6%E5%89%8D%E4%BD%BF%E7%94%A8%E8%80%85%EF%BC%88%E6%88%91%E6%96%B9%EF%BC%89%E5%82%B3%E9%81%9E%E7%9A%84%E8%A8%8A%E6%81%AF%EF%BC%8C%E6%8C%89%E7%85%A7%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%9A%84%E4%B8%80%E5%B0%8D%E4%B8%80%E8%81%8A%E5%A4%A9%E4%BB%8B%E9%9D%A2%E8%A8%AD%E8%A8%88%EF%BC%8C%E9%80%9A%E5%B8%B8%E6%87%89%E8%A9%B2%E6%98%AF%E5%8F%B3%E5%81%B4%E7%82%BA%E6%88%91%E6%96%B9%E7%9A%84%E8%A8%8A%E6%81%AF,%E5%B9%AB%E6%88%91%E8%AA%BF%E6%95%B4%E6%8E%92%E7%89%88)；新建立聊天室的標題則會設定為任務發布者的名稱，表示聊天對象是任務的發起人，而非自己。以上修正確保聊天介面在任務應徵後的行為符合預期。",
    "涉及檔案與對應邏輯": "前端 `chat_detail_page.dart`（聊天詳情頁）的 UI 及資料載入邏輯：修改 View Resume 按鈕的對話框內容生成邏輯，調用後端 API 獲取應徵詳情；調整聊天室初始化時對話訊息列表及發送者資訊的處理。可能影響 `task_service.dart` 或後端相關 API（如任務應徵提交後的聊天通知機制）。",
    "來源": "cursor_my_works.md L29419-L29427"
  },
  {
    "功能描述": "修復用戶登出後頭像快取未清除的問題。此前當用戶登出並換用其他帳號登入時，新帳號在某些頁面可能看到前一帳號的頭像 [oai_citation:14‡file-5pfujd5kyiq9w5babvqgwv](file://file-5pFujd5kyiq9w5BAbVqgwV#:~:text=)。現在，在執行登出操作時會清除本地儲存的使用者資訊及頭像快取，並在新用戶登入時重新載入其頭像。此修改透過在 `UserService.logout` 流程中增加清理 SharedPreferences 中 avatar_url 等資料，以及必要時手動清除 Flutter 圖片快取，確保切換帳號後顯示正確的使用者頭像。",
    "涉及檔案與對應邏輯": "`lib/auth/services/user_service.dart`（處理使用者登入/登出的服務） – 增強登出流程，加入清除快取邏輯；可能涉及 `Image.network` 等使用的快取策略，以及任務相關頁面（如 `task_create_page.dart`）在每次顯示頭像時改為從最新的 UserService 資料獲取。",
    "來源": "cursor_my_works.md L14379-L14382"
  },
  {
    "功能描述": "實現聊天訊息的**持久化**保存，確保用戶發送的訊息在重新整理或下次進入時仍可查看。具體而言，修改 `/chat/detail` 頁面：載入聊天室時會透過 API 從後端資料庫加載歷史對話訊息列表，發送新訊息時則呼叫 ChatService 將訊息傳送至後端並寫入資料庫（如 `chat_messages` 資料表） [oai_citation:15‡file-5pfujd5kyiq9w5babvqgwv](file://file-5pFujd5kyiq9w5BAbVqgwV#:~:text=%E7%94%A8%E6%88%B6%E8%BC%B8%E5%85%A5%20%E2%86%92%20_sendMessage,%E2%86%93%20%E2%9C%85%20chat_messages%20%E8%B3%87%E6%96%99%E8%A1%A8) [oai_citation:16‡file-5pfujd5kyiq9w5babvqgwv](file://file-5pFujd5kyiq9w5BAbVqgwV#:~:text=%E6%8C%89%E7%85%A7%E6%88%91%E7%9A%84%20todo%20%E6%96%87%E4%BB%B6%20%E6%8E%A5%E4%B8%8B%E4%BE%86%E7%9A%84%E5%B7%A5%E4%BD%9C%20%E6%88%91%E6%87%89%E8%A9%B2%E6%98%AF%E8%A6%81%E5%B0%87%E6%88%91%E7%9A%84%E8%81%8A%E5%A4%A9%E5%AE%A4%E5%8A%9F%E8%83%BD%E5%AE%8C%E5%96%84%EF%BC%8C%E5%8C%85%E5%90%AB%E5%BB%BA%E7%AB%8Bsocket,io%20%E8%AE%93%E8%81%8A%E5%A4%A9%E5%AE%A4%E9%9B%99%E6%96%B9%E5%8F%AF%E4%BB%A5%E9%80%8F%E9%81%8E%E8%81%8A%E5%A4%A9%E5%AE%A4%E5%88%97%E8%A1%A8%E5%89%8D%E5%BE%80%EF%BC%8C%E4%B8%A6%E4%B8%94%E5%AF%A6%E7%8F%BE%E5%8D%B3%E6%99%82%E8%81%8A%E5%A4%A9%E5%8A%9F%E8%83%BD%EF%BC%8C%E4%B8%A6%E4%B8%94%E8%A8%8A%E6%81%AF%E6%87%89%E8%A9%B2%E6%9C%83%E9%80%B2%E5%88%B0%E8%B3%87%E6%96%99%E5%BA%AB%EF%BC%9F%20%E5%B9%AB%E6%88%91%E5%AF%A6%E7%8F%BE%E8%A8%8A%E6%81%AF%E6%8C%81%E4%B9%85%E5%8C%96%E4%BF%9D%E5%AD%98)。先前版本中訊息僅保存在前端 `_messages` 陣列而未持久化，導致畫面重載後訊息遺失；調整後，引入 Socket.IO 即時通訊的整合（任務21）或以 HTTP API 方式（暫時方案）將訊息發送至後端，後端儲存成功後前端再更新UI。這確保了所有聊天訊息都有記錄，不會因為頁面刷新或退出而丟失。",
    "涉及檔案與對應邏輯": "前端 `chat_detail_page.dart`（聊天室頁面） – 新增變數管理已加載訊息列表 `_chatMessages`，在 init 時透過 ChatService/HTTP 請求獲取歷史訊息；`chat_service.dart` – 新增 `sendMessage` 方法，負責將新訊息透過 HTTP 或 Socket 傳送給後端 API（如 `/chat/send_message.php`），並接收確認後更新本地訊息列表。後端 PHP 檔 `send_message.php` 及資料庫 `chat_messages` 表 – 接收並存儲聊天訊息（此為後端部分）。",
    "來源": "cursor_my_works.md L50572-L50573"
  },
  {
    "功能描述": "修正 **Posted Tasks** 與 **My Works** 分頁任務列表的資料篩選邏輯，確保兩個分頁各自顯示正確的任務集合。經調整：Posted Tasks 分頁現在僅列出「由當前用戶發布的任務」及其應徵情況；My Works 分頁則顯示「當前用戶應徵或被委派參與的任務」清單 [oai_citation:17‡file-k2ttubjai1zewtowmmd91z](file://file-K2TTUBjai1ZEwToWmMd91z#:~:text=%E5%8F%83%E8%80%83%E6%88%AA%E5%9C%96%E4%B8%80%20%E7%9A%84%E4%BB%BB%E5%8B%99%E5%8D%A1%E7%89%87%E4%BD%88%E5%B1%80%EF%BC%8C%E5%B9%AB%E6%88%91%20%2Fchat%20My%20Works,task_id)。實現上，透過比對任務的建立者 (creator) 與當前用戶 ID 判斷屬於 Posted Tasks，以及結合資料表 `task_applications` 查詢出當前用戶作為應徵者的任務用於 My Works 列表 [oai_citation:18‡file-k2ttubjai1zewtowmmd91z](file://file-K2TTUBjai1ZEwToWmMd91z#:~:text=%E5%8F%83%E8%80%83%E6%88%AA%E5%9C%96%E4%B8%80%20%E7%9A%84%E4%BB%BB%E5%8B%99%E5%8D%A1%E7%89%87%E4%BD%88%E5%B1%80%EF%BC%8C%E5%B9%AB%E6%88%91%20%2Fchat%20My%20Works,task_id)。此更新解決了之前 My Works 列表空白、Posted Tasks 僅顯示單一任務的問題，符合預期的分流邏輯。",
    "涉及檔案與對應邏輯": "`lib/task/services/task_service.dart` 及 `ChatListPage` 頁面的資料載入與篩選邏輯 – 在拉取任務列表後，根據每個任務的 creator_id 與當前用戶 ID 決定其屬於 Posted Tasks 或 My Works；並使用申請記錄（task_applications）或任務對應的聊天室參與者資訊來判定 My Works 清單的內容。",
    "來源": "cursor_.md L69-L72"
  },
  {
    "功能描述": "調整任務應徵答案的 JSON 結構：不再使用固定的 `q1`、`q2`、`q3` 作為答案的鍵名，而改為以每個問題的**原始文字**作為鍵，值為使用者填寫的答案 [oai_citation:19‡file-5pfujd5kyiq9w5babvqgwv](file://file-5pFujd5kyiq9w5BAbVqgwV#:~:text=)。例如，若任務發布方自訂了一個問題 “Do you have relevant experience?”，則在 answers_json 中以 `\"Do you have relevant experience?\": \"<回答內容>\"` 形式存儲。此改動提升了資料的語義清晰度，確保每個答案與相應問題直接對應。在前端 View Resume 顯示時，會將 answers_json 的鍵視為問題文本來呈現答案內容。原有使用 `q1`... 標號的方式已被棄用（但仍做相容處理以支援舊資料）。",
    "涉及檔案與對應邏輯": "後端 `backend/api/tasks/apply.php`（或相關任務應徵 API） – 修改生成 `answers_json` 的邏輯：迭代處理請求中附帶的 answers 字段（鍵為問題題目，值為回答），構造 JSON 字符串儲存；對於未提供新格式的請求，仍兼容處理舊的 q1/q2/q3 字段以避免中斷既有功能。此變更同步影響前端履歷顯示邏輯，但前端主要只是直接使用後端提供的 JSON 進行呈現。",
    "來源": "cursor_my_works.md L92654-L92658"
  }
]