# Flutter æ‡‰ç”¨æ¸¬è©¦èŠå¤©ç³»çµ±æŒ‡å—

## ğŸ“‹ æ¸¬è©¦å‰æº–å‚™

### 1. å•Ÿå‹•å¾Œç«¯æœå‹™

#### å•Ÿå‹• Socket.IO æœå‹™
```bash
cd backend/socket
npm install
npm start
```

#### ç¢ºèª API æœå‹™é‹è¡Œ
ç¢ºä¿æ‚¨çš„ PHP å¾Œç«¯æœå‹™æ­£åœ¨é‹è¡Œï¼Œä¸¦ä¸”è³‡æ–™åº«é€£ç·šæ­£å¸¸ã€‚

### 2. æª¢æŸ¥è³‡æ–™åº«ç‹€æ…‹
```bash
cd backend/database
php quick_validate.php
```

### 3. ç¢ºèªé…ç½®
æª¢æŸ¥ `lib/config/app_config.dart` ä¸­çš„ API åŸºç¤ URL æ˜¯å¦æ­£ç¢ºï¼š
```dart
class AppConfig {
  static const String apiBaseUrl = 'http://localhost:8888/here4help/backend/api';
  // å…¶ä»–é…ç½®...
}
```

## ğŸ§ª æ¸¬è©¦æ­¥é©Ÿ

### æ­¥é©Ÿ 1: åŸºæœ¬é€£ç·šæ¸¬è©¦

#### 1.1 æ¸¬è©¦è³‡æ–™åº«é€£ç·š
```bash
cd backend/database
php test_connection.php
```

é æœŸè¼¸å‡ºï¼š
```
=== è³‡æ–™åº«é€£ç·šæ¸¬è©¦ ===
âœ… è³‡æ–™åº«é€£ç·šæˆåŠŸï¼
ğŸ“Š è³‡æ–™åº«åç¨±: hero4helpdemofhs_hero4help
ğŸ“‹ è¡¨æ ¼æ•¸é‡: 6
ğŸ‰ æ‰€æœ‰æ¸¬è©¦é€šéï¼è³‡æ–™åº«é…ç½®æ­£ç¢ºã€‚
```

#### 1.2 æ¸¬è©¦ Socket.IO æœå‹™
```bash
curl http://localhost:3001/health
```

é æœŸè¼¸å‡ºï¼š
```json
{
  "ok": true,
  "database": "connected",
  "timestamp": "2025-01-10T..."
}
```

### æ­¥é©Ÿ 2: API ç«¯é»æ¸¬è©¦

#### 2.1 æ¸¬è©¦ç²å–èŠå¤©æˆ¿é–“
```bash
# é¦–å…ˆç²å–ç”¨æˆ¶ Tokenï¼ˆéœ€è¦å…ˆç™»å…¥ï¼‰
curl -X GET "http://localhost:8888/here4help/backend/api/chat/get_rooms.php" \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

#### 2.2 æ¸¬è©¦ç™¼é€è¨Šæ¯
```bash
curl -X POST "http://localhost:8888/here4help/backend/api/chat/send_message.php" \
  -H "Authorization: Bearer YOUR_TOKEN_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "room_id": "test_room_1",
    "message": "Hello, this is a test message!",
    "task_id": "1"
  }'
```

### æ­¥é©Ÿ 3: Flutter æ‡‰ç”¨æ¸¬è©¦

#### 3.1 å•Ÿå‹• Flutter æ‡‰ç”¨
```bash
cd /path/to/your/flutter/app
flutter run
```

#### 3.2 ç™»å…¥æ¸¬è©¦
1. åœ¨æ‡‰ç”¨ä¸­ç™»å…¥ä¸€å€‹æ¸¬è©¦å¸³æˆ¶
2. ç¢ºèª Token å·²æ­£ç¢ºä¿å­˜
3. æª¢æŸ¥ç”¨æˆ¶è³‡è¨Šæ˜¯å¦è¼‰å…¥

#### 3.3 æ¸¬è©¦èŠå¤©åˆ—è¡¨é é¢
1. å°èˆªåˆ°èŠå¤©åˆ—è¡¨é é¢
2. æª¢æŸ¥æ˜¯å¦é¡¯ç¤ºèŠå¤©æˆ¿é–“åˆ—è¡¨
3. ç¢ºèªæœªè®€è¨Šæ¯è¨ˆæ•¸æ˜¯å¦æ­£ç¢º
4. æ¸¬è©¦æœå°‹å’Œç¯©é¸åŠŸèƒ½

#### 3.4 æ¸¬è©¦èŠå¤©è©³æƒ…é é¢
1. é»æ“Šä¸€å€‹èŠå¤©æˆ¿é–“é€²å…¥è©³æƒ…é é¢
2. æª¢æŸ¥è¨Šæ¯æ­·å²æ˜¯å¦è¼‰å…¥
3. æ¸¬è©¦ç™¼é€æ–°è¨Šæ¯
4. ç¢ºèªå³æ™‚æ¥æ”¶è¨Šæ¯

## ğŸ” æ¸¬è©¦æª¢æŸ¥æ¸…å–®

### åŸºæœ¬åŠŸèƒ½æ¸¬è©¦
- [ ] ç”¨æˆ¶ç™»å…¥å’Œ Token ç®¡ç†
- [ ] èŠå¤©æˆ¿é–“åˆ—è¡¨è¼‰å…¥
- [ ] è¨Šæ¯æ­·å²è¼‰å…¥
- [ ] ç™¼é€è¨Šæ¯åŠŸèƒ½
- [ ] å³æ™‚è¨Šæ¯æ¥æ”¶
- [ ] æœªè®€è¨Šæ¯è¨ˆæ•¸
- [ ] å·²è®€ç‹€æ…‹åŒæ­¥

### éŒ¯èª¤è™•ç†æ¸¬è©¦
- [ ] ç¶²è·¯é€£ç·šä¸­æ–·è™•ç†
- [ ] ç„¡æ•ˆ Token è™•ç†
- [ ] è³‡æ–™åº«é€£ç·šéŒ¯èª¤è™•ç†
- [ ] Socket é€£ç·šå¤±æ•—è™•ç†
- [ ] è¨Šæ¯ç™¼é€å¤±æ•—è™•ç†

### æ•ˆèƒ½æ¸¬è©¦
- [ ] å¤§é‡è¨Šæ¯è¼‰å…¥æ•ˆèƒ½
- [ ] åŒæ™‚å¤šå€‹èŠå¤©å®¤
- [ ] é•·æ™‚é–“é€£ç·šç©©å®šæ€§
- [ ] è¨˜æ†¶é«”ä½¿ç”¨æƒ…æ³

## ğŸ› å¸¸è¦‹å•é¡Œå’Œè§£æ±ºæ–¹æ¡ˆ

### å•é¡Œ 1: Socket.IO é€£ç·šå¤±æ•—
**ç—‡ç‹€**: æ‡‰ç”¨é¡¯ç¤º"èŠå¤©å®¤é€£ç·šå¤±æ•—"
**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æª¢æŸ¥ Socket æœå‹™æ˜¯å¦é‹è¡Œ
ps aux | grep node

# æª¢æŸ¥ç«¯å£æ˜¯å¦è¢«ä½”ç”¨
lsof -i :3001

# é‡å•Ÿ Socket æœå‹™
cd backend/socket
npm start
```

### å•é¡Œ 2: API ç«¯é»è¿”å› 404
**ç—‡ç‹€**: API è«‹æ±‚è¿”å› 404 éŒ¯èª¤
**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æª¢æŸ¥ PHP æœå‹™æ˜¯å¦é‹è¡Œ
ps aux | grep php

# æª¢æŸ¥ Apache/Nginx é…ç½®
# ç¢ºèª URL è·¯å¾‘æ­£ç¢º
```

### å•é¡Œ 3: è³‡æ–™åº«é€£ç·šå¤±æ•—
**ç—‡ç‹€**: è³‡æ–™åº«ç›¸é—œéŒ¯èª¤
**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æª¢æŸ¥ MySQL æœå‹™
brew services list | grep mysql

# æª¢æŸ¥è³‡æ–™åº«é…ç½®
cat backend/config/database.php

# æ¸¬è©¦è³‡æ–™åº«é€£ç·š
cd backend/database
php test_connection.php
```

### å•é¡Œ 4: è¨Šæ¯ä¸å³æ™‚æ›´æ–°
**ç—‡ç‹€**: ç™¼é€è¨Šæ¯å¾Œå°æ–¹æ²’æœ‰å³æ™‚æ”¶åˆ°
**è§£æ±ºæ–¹æ¡ˆ**:
1. æª¢æŸ¥ Socket.IO æœå‹™ç‹€æ…‹
2. ç¢ºèªæˆ¿é–“ ID æ­£ç¢º
3. æª¢æŸ¥ç”¨æˆ¶æ¬Šé™
4. æŸ¥çœ‹ç€è¦½å™¨æ§åˆ¶å°éŒ¯èª¤

## ğŸ“Š æ¸¬è©¦è³‡æ–™æº–å‚™

### å‰µå»ºæ¸¬è©¦ç”¨æˆ¶
```sql
INSERT INTO users (username, email, password, created_at) VALUES 
('testuser1', 'test1@example.com', 'hashed_password', NOW()),
('testuser2', 'test2@example.com', 'hashed_password', NOW());
```

### å‰µå»ºæ¸¬è©¦ä»»å‹™
```sql
INSERT INTO tasks (title, description, creator_id, status_id, created_at) VALUES 
('æ¸¬è©¦ä»»å‹™ 1', 'é€™æ˜¯ä¸€å€‹æ¸¬è©¦ä»»å‹™', 1, 1, NOW()),
('æ¸¬è©¦ä»»å‹™ 2', 'é€™æ˜¯å¦ä¸€å€‹æ¸¬è©¦ä»»å‹™', 2, 1, NOW());
```

### å‰µå»ºæ¸¬è©¦èŠå¤©æˆ¿é–“
```sql
INSERT INTO chat_rooms (id, task_id, creator_id, participant_id, created_at) VALUES 
('test_room_1', 1, 1, 2, NOW()),
('test_room_2', 2, 2, 1, NOW());
```

## ğŸ”§ èª¿è©¦å·¥å…·

### 1. ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·
- æª¢æŸ¥ç¶²è·¯è«‹æ±‚
- æŸ¥çœ‹ WebSocket é€£ç·šç‹€æ…‹
- ç›£æ§ Console éŒ¯èª¤

### 2. Flutter èª¿è©¦å·¥å…·
```bash
# æŸ¥çœ‹è©³ç´°æ—¥èªŒ
flutter run --verbose

# æª¢æŸ¥ç¶²è·¯è«‹æ±‚
flutter run --debug
```

### 3. è³‡æ–™åº«ç›£æ§
```sql
-- æŸ¥çœ‹èŠå¤©è¨Šæ¯
SELECT * FROM chat_messages ORDER BY created_at DESC LIMIT 10;

-- æŸ¥çœ‹èŠå¤©æˆ¿é–“
SELECT * FROM chat_rooms;

-- æŸ¥çœ‹å·²è®€ç‹€æ…‹
SELECT * FROM chat_reads;
```

## ğŸ“± ç§»å‹•ç«¯æ¸¬è©¦

### iOS æ¨¡æ“¬å™¨æ¸¬è©¦
```bash
flutter run -d ios
```

### Android æ¨¡æ“¬å™¨æ¸¬è©¦
```bash
flutter run -d android
```

### å¯¦é«”è¨­å‚™æ¸¬è©¦
```bash
# åˆ—å‡ºå¯ç”¨è¨­å‚™
flutter devices

# åœ¨ç‰¹å®šè¨­å‚™ä¸Šé‹è¡Œ
flutter run -d DEVICE_ID
```

## ğŸ¯ æ¸¬è©¦é©—æ”¶æ¨™æº–

### åŠŸèƒ½å®Œæ•´æ€§
- âœ… æ‰€æœ‰èŠå¤©åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… å³æ™‚é€šè¨Šç©©å®šå¯é 
- âœ… éŒ¯èª¤è™•ç†å®Œå–„
- âœ… ç”¨æˆ¶é«”é©—æµæš¢

### æ•ˆèƒ½è¦æ±‚
- âœ… è¨Šæ¯ç™¼é€å»¶é² < 500ms
- âœ… é é¢è¼‰å…¥æ™‚é–“ < 2s
- âœ… è¨˜æ†¶é«”ä½¿ç”¨ç©©å®š
- âœ… é›»æ± æ¶ˆè€—åˆç†

### å®‰å…¨æ€§
- âœ… èº«ä»½é©—è­‰æœ‰æ•ˆ
- âœ… æ¬Šé™æª¢æŸ¥æ­£ç¢º
- âœ… è³‡æ–™å‚³è¼¸å®‰å…¨
- âœ… ç„¡æ•æ„Ÿè³‡è¨Šæ´©éœ²

---

**æ¸¬è©¦å®Œæˆå¾Œï¼ŒèŠå¤©ç³»çµ±å°±å¯ä»¥æ­£å¼æŠ•å…¥ä½¿ç”¨ï¼** ğŸ‰

å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹åƒè€ƒæ•…éšœæ’é™¤éƒ¨åˆ†æˆ–è¯ç¹«é–‹ç™¼åœ˜éšŠã€‚ 